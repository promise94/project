!function(t){function e(s){if(o[s])return o[s].exports;var n=o[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e){var o=function(t){$.modal({title:'<div class="iconfont  icon-routine_success rs_alert_routine_success"></div>',text:'<div class="rs_alert_t">选房成功</div><div class="rs_alert_p">'+t+"</div>",buttons:[{text:"查看订单",onClick:function(){location.href="/front/userCenter/orderlist?hotelId="+hotelId}}]})},s=function(t,e){$.modal({title:'<div class="iconfont  icon-routine_fail rs_alert_routine_fail"></div>',text:'<div class="rs_alert_t">选房失败</div><div class="rs_alert_p">'+t+"</div>",buttons:[{text:"重新选择",onClick:function(){e&&e()}}]})},n=function(t){var e=t,o=0,s=0,n=($(t).find("span").width(),$("body").width()-$(".resultView .leftBox").width()),a=function(t){e.style.transform="translate("+t+"px,0)",e.style.webkitTransform="translate("+t+"px,0)"},i=function(t){e.style.transition="all, 0.3s, ease, 0s",e.style.webkitTransition="all, 0.3s, ease, 0s"},r=function(t){e.style.transition="none",e.style.webkitTransition="none"},l=function(t){var e=t.touches[0];s=e.clientX-o,r()},c=function(t){var e=t.touches[0];o=(s-e.clientX)*-1,a(o),t.preventDefault()},u=function(e){var r=e.changedTouches[0];if(s=r.clientX,$(t).width()<n)return i(),a(0),o=0,!1;if(o>0)return i(),a(0),o=0,!1;var l=n-t.clientWidth;return o<l?(i(),a(l),o=l,!1):void 0};t.addEventListener($.touchEvents.start,l),t.addEventListener($.touchEvents.move,c),t.addEventListener($.touchEvents.end,u)},a=function(){setTimeout(function(){var t=$(".resultView .rightBox span").length,e=$(".resultView .rightBox span").width()*t+20*t;$(".resultView .rightBox").width(e)},200)},i=function(t){var e=function(t){var e=[],o=t.content.roomStyleList;for(var s in o)for(var n in o[s].roomList)e.push(o[s].roomList[n]);return e},i=e(t),c=Vue.extend({});Vue.component("roomselect-component",c);var u={selectfloat:t.content.roomStyleList[0],selectConut:0},m=new Vue({el:"#roomselect",data:{ajaxdata:t,rooms:i,myData:u},methods:{init:function(){for(var t=this.$get("ajaxdata.content.roomStyleList"),e=t.length,o=0;o<e;o++)this.$set("ajaxdata.content.roomStyleList["+o+"].selectConut","0")},selectfloat:function(t){if(this.$get("myData.selectfloat")==this.$get("ajaxdata.content.roomStyleList["+e+"]"))return!1;var e=t.target.getAttribute("index"),o=this.$get("ajaxdata.content.roomStyleList["+e+"]");this.$set("myData.selectfloat",o),this.showRoomsBox(e)},showRoomsBox:function(t){$.popup_dvb_close($(".float_box"),function(){$(".select_p1").attr({show:"n"}),$(".select_p1").removeClass("show")}),$.popup_dvb($(".room_box"),11,function(){$(".select_p2").attr({show:"y"}),$(".select_p2").addClass("show")},function(){$(".select_p2").attr({show:"n"}),$(".select_p2").removeClass("show")})},selectroom:function(t){var e=this.$get("myData.selectfloat.roomList["+t+"]");if(1==e.isSold||e.roomStyleId!=this.$get("ajaxdata.content.roomStyleId"))return!1;var o=this.$get("myData.selectConut"),s=this.$get("myData.selectfloat.selectConut");if(1==this.$get("myData.selectfloat.roomList["+t+"].isSelect"))this.$set("myData.selectfloat.roomList["+t+"].isSelect",!1),this.$set("myData.selectConut",--o),this.$set("myData.selectfloat.selectConut",--s);else{if(this.$get("myData.selectConut")==this.$get("ajaxdata.content.roomAmount"))return $.toast("你只预定了"+this.$get("myData.selectConut")+"间房",2e3,"2"),!1;this.$set("myData.selectfloat.selectConut",++s),this.$set("myData.selectfloat.roomList["+t+"].isSelect",!0),this.$set("myData.selectConut",++o)}a()},removeroom:function(t){var e=this.$get("myData.selectConut"),o=this.$get("myData.selectfloat.selectConut");this.$set("myData.selectConut",--e),this.$set("rooms["+t+"].isSelect",!1),this.$set("myData.selectfloat.selectConut",--o),a()},clearSelect:function(){var t=this;$.showIndicator(),$.get("/api/selectroom/list?callback=?",l,function(o){if($.hideIndicator(),1e3==o.code){var s=e(o),n={selectfloat:o.content.roomStyleList[0],selectConut:0};t.$set("ajaxdata",o),t.$set("rooms",s),t.$set("myData",n),t.init()}else $.toast(o.message)},"json")},submit:function(){var t=this;$.popup_dvb_close($(".float_box"),function(){$(".select_p1").attr({show:"n"}),$(".select_p1").removeClass("show")}),$.popup_dvb_close($(".room_box"),function(){$(".select_p2").attr({show:"n"}),$(".select_p2").removeClass("show")});var e=this.$get("myData.selectConut"),n=this.$get("ajaxdata.content.roomAmount");if(e!=n){var a=n-e;$.modal({text:"您还有"+a+"间房未选房",buttons:[{text:"继续选房"}]});return!1}var i={version:version,system:system,lang:lang,APIGEEHEADER2:APIGEEHEADER2,securityKey:securityKey,orderNo:r};i.roomStyleId=this.$get("ajaxdata.content.roomStyleId"),i.roomNumIds=[];var l=[];$(".resultView .rightBox span").each(function(t){i.roomNumIds.push($(this).find("i").attr("roomid")),l.push($(this).attr("numname"))}),i.roomNumIds=i.roomNumIds.join(","),l=l.join(","),validateOnline()&&($.showIndicator(),$.post("/api/selectroom/userselect",i,function(e){$.hideIndicator(),1e3==e.code?o(l+"房间等待你的到来～"):s(e.message,function(){t.clearSelect()})},"json"))}}});m.init(),$(".select_p1").on("click",function(){"y"!=$(this).attr("show")?($.popup_dvb_close($(".room_box"),function(){$(".select_p2").attr({show:"n"}),$(".select_p2").removeClass("show")}),$.popup_dvb($(".float_box"),11,function(){$(".select_p1").attr({show:"y"}),$(".select_p1").addClass("show")},function(){$(".select_p1").attr({show:"n"}),$(".select_p1").removeClass("show")})):$.popup_dvb_close($(".float_box"),function(){$(".select_p1").attr({show:"n"}),$(".select_p1").removeClass("show")})}),$(".select_p2").on("click",function(){"y"!=$(this).attr("show")?($.popup_dvb_close($(".float_box"),function(){$(".select_p1").attr({show:"n"}),$(".select_p1").removeClass("show")}),$.popup_dvb($(".room_box"),11,function(){$(".select_p2").attr({show:"y"}),$(".select_p2").addClass("show")},function(){$(".select_p2").attr({show:"n"}),$(".select_p2").removeClass("show")})):$.popup_dvb_close($(".room_box"),function(){$(".select_p2").attr({show:"n"}),$(".select_p2").removeClass("show")})}),n($(".resultView .rightBox")[0])},r=getUrlParams("orderNo"),l={version:version,system:system,lang:lang,APIGEEHEADER2:APIGEEHEADER2,securityKey:securityKey,orderNo:r};$.showIndicator(),$("#roomselect").hide(),jQuery(document).ready(function(){null==r?($.hideIndicator(),$.toast("订单号不存在，不能选房")):$.get("/api/selectroom/list?callback=?",l,function(t){$.hideIndicator(),1e3==t.code?($("#roomselect").show(),i(t)):$.toast(t.message)},"json")})}]);